<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Source View: https://evernote.com/media/js/build/home.js</title><meta name="robots" content="noindex,nofollow"><meta name="SortSite-IgnoreRule-Page" content="AccWcag1-13.1.3,AccWcag1-14.1.3,Section508-m-3,BugHtmlColgroup,BugIeCssMinMaxWidthHeight,ErrSpellingError,SeoBingTitleLength,SeoPage150k,UseGov5.1,UseGov9.2.3,UseGov10.11,UseGov11.7,UseGov14.3,UseGov17.4,UseGunningFog,W3cTitleTooLong"><style type="text/css"> 
				body { font-size: smaller; color: black; background-color: white; font-family: Arial, Helvetica, sans-serif; }
                
				div.pre { color: #333; white-space: pre; font-family: monospace; clear: both; }
				div.linespan { display: inline; }
				span.ok { color: #000; } 
				span.err { color: #f00; } 
				span.line { } 
				div.line { float: left; width: 40%; clear: both; }
				div.col1 { float: left; width: 5%; padding: 2px; white-space: normal; }
				div.col2 { float: left; width: 90%; padding-left: 6px; white-space: normal; }
				div.hdr, div.err { border-radius: 10px; margin-bottom: 10px; margin-top: 10px; position: relative; z-index: 1; top: 0px; left: 0px; width: 90%; padding: 6px; color: black; background-color: #f7f7f7; border: 1px solid #e0e0e0; font-family: Arial, Helvetica, sans-serif; float: left; clear: both;  }
				div.err-hilite { margin-bottom: 10px; position: relative; z-index: 1; top: 0px; left: 40px; width: 40%; padding: 6px; color: black; background-color: #f7f7f7; border: 1px solid #e0e0e0; font-family: Arial, Helvetica, sans-serif; font-weight: bold; } 
				div.desc { float: left; width: 40%; margin-bottom: 1em; }
				div.help { float: right; width: 55%; margin-bottom: 1em; }
				div.menu-title { float: right; width: 25%; min-width: 100px; text-align: right; padding: 1px; white-space: nowrap; }
				code.dhtml { background-color: #eeeeff; font-weight: bold; }
				a.accessible { display: none; } 
				a.menu-title { text-decoration: none; color: black; background-color: white; border-left: 1px solid #bbb; border-top: 1px solid #bbb; border-right: 1px solid #222; border-bottom: 1px solid #222; text-align: right; display: block; padding: 2px; }
				a.menu-title:hover { text-decoration: underline; } 
				was-div.hdr { border-radius: 10px; margin-bottom: 10px; margin-top: 10px; width: 90%; padding: 10px; color: black; background-color: #f7f7f7; border: 1px solid #e0e0e0; font-family: Arial, Helvetica, sans-serif; }
				th { text-align: left; font-weight: normal; font-style: normal; }
				tr { vertical-align: top; }
				tr.middle { vertical-align: middle; }
				img { border: none; vertical-align: middle; }
				p { padding:0; margin:0; }
				p code { display: block; float: left; width: 90%; font-size: 1em; }
				p code:first-child { width: 4em; clear: both; }
                
				a.spell-bad
				{
					text-decoration: none;
					color: black;
					border-bottom: 1px dotted red;
					line-height: 1.5em;
				}
				a.spell-good
				{
					text-decoration: line-through;
					color: gray;
					border-bottom: none;
					line-height: 1.5em;
				}

					
				</style><script type="text/javascript" src="../Report/jquery.min.js"></script><script type="text/javascript">
				var g_errViewSource = "";
				var g_viewSourceDir = "";
				
				
				function pageLoad()
				{
					fixupOptions();
					enableSpellings();
					selectLine();
				}
				
				function fixupOptions()
				{
					for ( var i = 0 ; i < document.links.length ; ++i )
					{
						var oLink = document.links[i];
						
						if ( oLink.onclick && oLink.onclick.toString().indexOf( "Options(" ) > 0 )
						{
							oLink.oncontextmenu = document.oncontextmenu = function() { this.click(); return false; }
						}
					}
				}
		
				function toggleChevron( id )
				{
					var oElement = document.getElementById( "chev" + id );
					//alert( id + " " + oElement.outerHTML );

					if ( oElement.src.indexOf( "chevron-up.png" ) != -1 )
					{
						oElement.src = oElement.src.replace( "up", "down" );
					}
					else
					{
						oElement.src = oElement.src.replace( "down", "up" );
					}

					toggleVisibility( id );
				}
					
				function toggleVisibility( id )
				{					
					var oElement = document.getElementById( id );					
										
					var strVisible = 'block';
					
					if ( oElement.style.display == 'none' )
						oElement.style.display = strVisible;
					else
						oElement.style.display = 'none';
				}
				
				
				function viewSource( pageid, line, col )
				{	
					try
					{
						if ( g_viewSourceDir != '' )
						{
							window.location.href = g_viewSourceDir + pageid + ".view.htm#htm-l" + line;
						}
						else
						{
							window.external.ViewSource( pageid, line, col );
						}
					}
					catch( err )
					{
						if ( g_errViewSource )
							alert( g_errViewSource );
					}
				}

				function enableSpellings()
				{
					var oRows = document.getElementsByTagName('a');
					
					for ( i = 0 ; i < oRows.length ; ++i )
					{
						var	oElement = oRows[i];
											
						if ( oElement.className == "spell-bad"  )
						{
						
							try
							{
								var strWord = oElement.innerHTML;
								
								var bCorrect = window.external.GetSpellingCorrect( strWord );

								if ( bCorrect )
									oElement.className = 'spell-good';
							}
							catch(err)
							{
								//Do nothing
							}
						}
					}
				}
				
				function spellOptions( oLink, strWord, strAppEdition )
				{
					SpellAction = {
						spellOther : 0,
						spellAdded : 1,
						spellRemoved : 2
					};

					try
					{
						var action = SpellAction.spellOther;

						if ( strAppEdition.indexOf( "web" ) != -1 )
						{
							// add to custom dictionary
							var urlAdd = '/Scans/AddCustomSpelling?word=' + strWord;
							var urlRemove = '/Scans/RemoveCustomSpelling?word=' + strWord;

							if ( $( '#iframeSpelling' ).attr('src') == urlAdd )
							{
								// clicking word again removes it from dictionary
								action = SpellAction.spellRemoved;	
								$( '#iframeSpelling' ).attr('src', urlRemove );
							}
							else
							{
								action = SpellAction.spellAdded;
								$( '#iframeSpelling' ).attr('src', urlAdd );
							}
						}
						else
						{
							// popup menu
							action = window.external.SpellOptions( strWord );
						}

						if ( action == SpellAction.spellAdded )
						{
							// mark this one as good
							oLink.className = 'spell-good';

							// mark all instances of this word as good
							for (var i = 0; i < document.links.length; i++)
							{
								var	oAnchor = document.links[i];

								if ( oAnchor.className == 'spell-bad' && oAnchor.innerHTML == strWord )
								{
									oAnchor.className = 'spell-good';
								}
							}
						}
						else if ( action == SpellAction.spellRemoved )
						{
							// mark this one as bad again
							oLink.className = 'spell-bad';

							// mark all instances of this word as good
							for (var i = 0; i < document.links.length; i++)
							{
								var	oAnchor = document.links[i];

								if ( oAnchor.className == 'spell-good' && oAnchor.innerHTML == strWord )
								{
									oAnchor.className = 'spell-bad';
								}
							}
						}
					}
					catch( err )
					{
						alert( "Spelling options are only available when the report is viewed in SortSite." );
					}

					// don't jump around or scroll after showing options menu
					return false;
				}
				</script></head><body onload="pageLoad()"><a class="accessible" href="#mainContent">[Skip to Content]</a><div class="hdr"><h1>
						JavaScript File
					</h1><table><tr><th>
						URL: 
					</th><td><a rel="nofollow" target="_top" href="https://evernote.com/media/js/build/home.js">https://evernote.com/media/js/build/home.js</a></td></tr><tr><th title="The status code returned by the web server tells the browser if the request was successful.">
						HTTP Status: 
					</th><td title="The status code returned by the web server tells the browser if the request was successful.">200 OK</td></tr><tr><th title="The MIME type returned by the web server tells the browser how to display the returned content. For example text/html tells the browser to display the content as HTML.">
						MIME Type: 
					</th><td title="The MIME type returned by the web server tells the browser how to display the returned content. For example text/html tells the browser to display the content as HTML.">application/javascript</td></tr><tr><th title="The last modification date says when the content was last modified. It is often wrong for dynamic pages.">
						Last Modified: 
					</th><td title="The last modification date says when the content was last modified. It is often wrong for dynamic pages.">Wed, 15 Jul 2015 00:56:22 GMT</td></tr><tr><th>
						Download Time: 
					</th><td>
								Less than a second
							</td></tr><tr><th>
						Cookies: 
					</th><td>
								None
							</td></tr><tr><th>
						Size: 
					</th><td>21 KB 
						</td></tr><tr><th>
						HTTP Headers: 
					</th><td><a href="#" onclick="toggleChevron('HttpHeaders'); return false;" onkeypress="this.click();"><img width="20" height="20" alt="View Headers" id="chevHttpHeaders" src="../Report/chevron-down.png"></a>&nbsp;<a href="#" onclick="toggleChevron('HttpHeaders'); return false;" onkeypress="this.click();">7&nbsp;headers</a><div style="display: none; width: 100%;" id="HttpHeaders"><a rel="nofollow">Accept-Ranges:  bytes
</a><br><a rel="nofollow">Cache-Control:  max-age=86400
</a><br><a rel="nofollow">Date:  Thu, 16 Jul 2015 06:12:55 GMT
</a><br><a rel="nofollow">Server:  Apache
</a><br><a rel="nofollow">Strict-Transport-Security:  max-age=31536000
</a><br><a rel="nofollow">Vary:  Accept-Encoding
</a><br><a rel="nofollow">X-Frame-Options:  SAMEORIGIN
</a><br></div></td></tr><tr><th>
						Links In: 
					</th><td><a href="#" onclick="toggleChevron('LinksIn'); return false;" onkeypress="this.click();"><img width="20" height="20" alt="View Links" id="chevLinksIn" src="../Report/chevron-down.png"></a>&nbsp;<a href="#" onclick="toggleChevron('LinksIn'); return false;" onkeypress="this.click();">1&nbsp;pages</a><div style="display: none; width: 100%;" id="LinksIn"><a rel="nofollow" href="https://evernote.com/" onclick="viewSource( 3, 0, 0 ); return false;" onkeypress="this.click();">https://evernote.com/</a><br></div></td></tr><tr><th>
							Links Out: 
						</th><td><a><img width="20" height="20" alt="View Links" id="chevLinksOut" src="../Report/chevron-disabled.png"></a>&nbsp;<a>0&nbsp;links</a><div style="display: none; width: 100%;" id="LinksOut"></div></td></tr><tr><th>
							Images: 
						</th><td><a><img width="20" height="20" alt="View Images" id="chevImages" src="../Report/chevron-disabled.png"></a>&nbsp;<a>0&nbsp;images</a><div style="display: none; width: 100%;" id="Images"></div></td></tr><tr><th>
							CSS: 
						</th><td><a><img width="20" height="20" alt="View CSS Files" id="chevCSS" src="../Report/chevron-disabled.png"></a>&nbsp;<a>0&nbsp;files</a><div style="display: none; width: 100%;" id="CSS"></div></td></tr><tr><th>
							JavaScript: 
						</th><td><a><img width="20" height="20" alt="View JavaScript Files" id="chevJavaScript" src="../Report/chevron-disabled.png"></a>&nbsp;<a>0&nbsp;files</a><div style="display: none; width: 100%;" id="JavaScript"></div></td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr class="middle"><th><img alt="Issue" style="text-align:absmiddle" width="20" height="20" src="../Report/bench-worse.png">	
								Issues: 
							</th><td>1
								issues found on
								1
								lines
							</td></tr></table></div><div id="mainContent" class="pre"><script type='text/javascript'>function selectLine() {}</script><br style='clear: both'> <div id='err-l1c1-0' class='err' >  <div class='col1'><img src='../Report/p1.png' width='20' height='20' alt='Priority 1'> </div>  <div class='col2'>   <div class='desc'>Internet Explorer 8 and earlier cannot download files over HTTPS if the HTTP headers disallow caching. 
			HTTP caching headers:
			 
			Vary  Accept-Encoding&#13;&#10;
			Cache-Control  max-age=86400&#13;&#10;
		</div>   <div class='help'>This only affects files that display outside Internet Explorer: PDFs, Office documents, etc. </div>   <div class='line'><span class='line'>Line 1</span>  <a href='http://blogs.msdn.com/b/ieinternals/archive/2009/10/02/internet-explorer-cannot-download-over-https-when-no-cache.aspx' target='_top'>Internet Explorer &#8804; 8.0</a></div>   <div class='menu-title'><a href='#' class='menu-title' onclick='window.external.RuleOptions( this, "BugDownloadCacheDisabled" ); return false;'>Options <img src='../Report/dropbox.png' width='8' height='8' alt=''></a></div>  </div> </div> <br><br style='clear: both'><p><code>1</code><code>(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&amp;&amp;require;if(!u&amp;&amp;a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&amp;&amp;require;for(var o=0;o&lt;r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){</code></p>
<p><code>2</code><code>(function ($) {</code></p>
<p><code>3</code><code>  'use strict';</code></p>
<p><code>4</code><code>  window.svgCSS = 'global-svg.css';</code></p>
<p><code>5</code><code>          </code></p>
<p><code>6</code><code>  //start crossfade on hero image</code></p>
<p><code>7</code><code>  //$('.items').crossfade({time: 5000, duration:1000, random:true});</code></p>
<p><code>8</code><code>  var docWidth = $(document).width(),</code></p>
<p><code>9</code><code>    animate = true,</code></p>
<p><code>10</code><code>    mobilesize = 710,</code></p>
<p><code>11</code><code>    language = $('body').attr('data-lang'),</code></p>
<p><code>12</code><code>    country = $('body').attr('data-country'),</code></p>
<p><code>13</code><code>    pricing = require('./modules/sku'),</code></p>
<p><code>14</code><code>    download = false,</code></p>
<p><code>15</code><code>    chinaSite = false,</code></p>
<p><code>16</code><code>    timer = 10000,</code></p>
<p><code>17</code><code>    serviceUrl = require('./modules/service-url'),</code></p>
<p><code>18</code><code>    urlParams = require('./modules/get-parameter')();</code></p>
<p><code>19</code><code>          </code></p>
<p><code>20</code><code>    pricing(['premium-1year', 'plus-1year'], function(data) {</code></p>
<p><code>21</code><code>      var prices = {};</code></p>
<p><code>22</code><code>      for (var tier in data) {</code></p>
<p><code>23</code><code>        //prices[tier] = data[tier].formatted;</code></p>
<p><code>24</code><code>        if ($('[data-sku="' + tier +'"]').length &gt; 0) {</code></p>
<p><code>25</code><code>          $('[data-sku="' + tier + '"]').html(data[tier].formatted);</code></p>
<p><code>26</code><code>        }</code></p>
<p><code>27</code><code>      }</code></p>
<p><code>28</code><code>          </code></p>
<p><code>29</code><code>      if (data['premium-1year'].symbol.length &gt;= 3) {</code></p>
<p><code>30</code><code>        $('.tier-price').addClass('shrink');</code></p>
<p><code>31</code><code>      }</code></p>
<p><code>32</code><code>    });</code></p>
<p><code>33</code><code>          </code></p>
<p><code>34</code><code>    window.checkSession = function(loggedIn, userType) {</code></p>
<p><code>35</code><code>      if(loggedIn === true){</code></p>
<p><code>36</code><code>        $('.plus .tier-cta').attr('href', serviceUrl('/subscriptions?itemCode=plus-1year&amp;offer=www_home_tier_CTA'));</code></p>
<p><code>37</code><code>        $('.premium .tier-cta').attr('href', serviceUrl('/subscriptions?itemCode=premium-1year&amp;offer=www_home_tier_CTA'));</code></p>
<p><code>38</code><code>      }</code></p>
<p><code>39</code><code>    };</code></p>
<p><code>40</code><code>          </code></p>
<p><code>41</code><code>  function checkWindow(e) {</code></p>
<p><code>42</code><code>    docWidth = $(document).width();</code></p>
<p><code>43</code><code>    if (docWidth &lt;= mobilesize) {</code></p>
<p><code>44</code><code>      animate = false;</code></p>
<p><code>45</code><code>    }</code></p>
<p><code>46</code><code>    </code></p>
<p><code>47</code><code>    if (docWidth &lt;= mobilesize &amp;&amp; $('.items li:first').hasClass('hero-1') || $('.items li:first').hasClass('hero-4')) {</code></p>
<p><code>48</code><code>      $('.achievement').removeClass('white');</code></p>
<p><code>49</code><code>    }else if(docWidth &gt;= mobilesize &amp;&amp; $('.items li:first').hasClass('hero-1') || $('.items li:first').hasClass('hero-4')){</code></p>
<p><code>50</code><code>      $('.achievement').addClass('white');</code></p>
<p><code>51</code><code>    }</code></p>
<p><code>52</code><code>          </code></p>
<p><code>53</code><code>    // add dark header top</code></p>
<p><code>54</code><code>    if ($('.items li:first').hasClass('hero-5') &amp;&amp; docWidth &lt;= mobilesize){</code></p>
<p><code>55</code><code>      $('header').addClass('brown');</code></p>
<p><code>56</code><code>      $('.achievement').addClass('white-text');</code></p>
<p><code>57</code><code>    }else{</code></p>
<p><code>58</code><code>      $('header').removeClass('brown');</code></p>
<p><code>59</code><code>      $('.achievement').removeClass('white-text');</code></p>
<p><code>60</code><code>    }</code></p>
<p><code>61</code><code>  }</code></p>
<p><code>62</code><code>  $(window).bind('resize', checkWindow);</code></p>
<p><code>63</code><code>  </code></p>
<p><code>64</code><code>  if (docWidth &gt;= mobilesize &amp;&amp; $('.items li:first').hasClass('hero-1') || $('.items li:first').hasClass('hero-4')) {</code></p>
<p><code>65</code><code>    $('.achievement').addClass('white');</code></p>
<p><code>66</code><code>  }</code></p>
<p><code>67</code><code>          </code></p>
<p><code>68</code><code>  // change buttons in navigation to white</code></p>
<p><code>69</code><code>  if ($('.items li:first').hasClass('hero-5')){</code></p>
<p><code>70</code><code>    $('header').addClass('white');</code></p>
<p><code>71</code><code>  }</code></p>
<p><code>72</code><code>          </code></p>
<p><code>73</code><code>  if ($('.items li:first').hasClass('hero-5') &amp;&amp; docWidth &lt;= mobilesize){</code></p>
<p><code>74</code><code>    $('header').addClass('brown');</code></p>
<p><code>75</code><code>    $('.achievement').addClass('white-text');</code></p>
<p><code>76</code><code>  }</code></p>
<p><code>77</code><code>  </code></p>
<p><code>78</code><code>  // if china</code></p>
<p><code>79</code><code>  if ($('body').hasClass('china_site')) {</code></p>
<p><code>80</code><code>    chinaSite = true;</code></p>
<p><code>81</code><code>  }</code></p>
<p><code>82</code><code>  // if china or english set language to blank</code></p>
<p><code>83</code><code>  if (language === 'en' || chinaSite === true) {</code></p>
<p><code>84</code><code>    language = '';</code></p>
<p><code>85</code><code>  }</code></p>
<p><code>86</code><code>  //change forms if staging</code></p>
<p><code>87</code><code>  if (window.location.href.indexOf('stage') &gt; -1 || window.location.href.indexOf('local') &gt; -1) {</code></p>
<p><code>88</code><code>    $('#create-account').attr('action', 'https://stage.evernote.com/Registration.action?_sourcePage=TRewqUBoP0TiMUD9T65RG_YvRLZ-1eYO3fqfqRu0fynRL_1nukNa4gH1t86pc1SP');</code></p>
<p><code>89</code><code>    $('#targetUrl-signup').val('https://stage-corp.evernote.com/continue');  // $('#login').attr('action', 'https://stage.evernote.com/Login.action');</code></p>
<p><code>90</code><code>  }</code></p>
<p><code>91</code><code>  // hide and show sign up overlay</code></p>
<p><code>92</code><code>  var open = false;</code></p>
<p><code>93</code><code>  function signUpOverlay(from) {</code></p>
<p><code>94</code><code>    if (open === false) {</code></p>
<p><code>95</code><code>      //hide header menu link</code></p>
<p><code>96</code><code>      $('#header-menu').hide();</code></p>
<p><code>97</code><code>      $('.cta').hide();</code></p>
<p><code>98</code><code>      $('#email-address, #password, #username, #password2').val('').removeClass('error-border');</code></p>
<p><code>99</code><code>      $('.field-item').removeClass('active-error');</code></p>
<p><code>100</code><code>      $('.error-message').hide();</code></p>
<p><code>101</code><code>      $('.home-hero .overlay').fadeIn();</code></p>
<p><code>102</code><code>      open = true;</code></p>
<p><code>103</code><code>    } else {</code></p>
<p><code>104</code><code>      $('.home-hero .overlay').fadeOut();</code></p>
<p><code>105</code><code>      $('.error-message').hide();</code></p>
<p><code>106</code><code>      open = false;</code></p>
<p><code>107</code><code>      //show header menu link</code></p>
<p><code>108</code><code>      $('#header-menu').fadeIn();</code></p>
<p><code>109</code><code>      $('.cta').fadeIn();</code></p>
<p><code>110</code><code>    }</code></p>
<p><code>111</code><code>  }</code></p>
<p><code>112</code><code>          </code></p>
<p><code>113</code><code>  // device detection for download on mobile and tablet</code></p>
<p><code>114</code><code>  var ua = navigator.userAgent;</code></p>
<p><code>115</code><code>  var checkDevice = {</code></p>
<p><code>116</code><code>      ios: ua.match(/(iPhone|iPod|iPad)/),</code></p>
<p><code>117</code><code>      iphone: ua.match(/(iPhone)/),</code></p>
<p><code>118</code><code>      ipad: ua.match(/(iPad)/),</code></p>
<p><code>119</code><code>      ipod: ua.match(/(iPod)/),</code></p>
<p><code>120</code><code>      blackberry: ua.match(/(BlackBerry|BB10)/),</code></p>
<p><code>121</code><code>      android: ua.match(/Android/),</code></p>
<p><code>122</code><code>      mac: ua.match(/Macintosh/),</code></p>
<p><code>123</code><code>      windows: ua.match(/Windows/),</code></p>
<p><code>124</code><code>      wechat: ua.match(/MicroMessenger/)</code></p>
<p><code>125</code><code>    };</code></p>
<p><code>126</code><code>  if (checkDevice.android) {</code></p>
<p><code>127</code><code>    getDownloadInfo('android');</code></p>
<p><code>128</code><code>  } else if (checkDevice.ipad) {</code></p>
<p><code>129</code><code>    getDownloadInfo('ipad');</code></p>
<p><code>130</code><code>    $('#sign-up').attr('href', 'https://itunes.apple.com/us/app/evernote/id281796108?mt=8').text('Download');</code></p>
<p><code>131</code><code>  } else if (checkDevice.ipod) {</code></p>
<p><code>132</code><code>    getDownloadInfo('ipod');</code></p>
<p><code>133</code><code>    $('#sign-up').attr('href', 'https://itunes.apple.com/us/app/evernote/id281796108?mt=8').text('Download');</code></p>
<p><code>134</code><code>  } else if (checkDevice.iphone) {</code></p>
<p><code>135</code><code>    getDownloadInfo('iphone');</code></p>
<p><code>136</code><code>    $('#sign-up').attr('href', 'https://itunes.apple.com/us/app/evernote/id281796108?mt=8').text('Download');</code></p>
<p><code>137</code><code>  } else if (checkDevice.blackberry) {</code></p>
<p><code>138</code><code>    getDownloadInfo('blackberry');</code></p>
<p><code>139</code><code>  }</code></p>
<p><code>140</code><code>          </code></p>
<p><code>141</code><code>  // show apple badge</code></p>
<p><code>142</code><code>  if (checkDevice.ios) {</code></p>
<p><code>143</code><code>    $('.product-download').addClass('ios');</code></p>
<p><code>144</code><code>  }</code></p>
<p><code>145</code><code>          </code></p>
<p><code>146</code><code>  if (checkDevice.wechat &amp;&amp; $('.wechat.mask').length){</code></p>
<p><code>147</code><code>    $("#sign-up").on('click',function(){</code></p>
<p><code>148</code><code>      $('.wechat.mask').show();</code></p>
<p><code>149</code><code>      $('.wechat.mask').on('click',function(){</code></p>
<p><code>150</code><code>        $(this).hide();</code></p>
<p><code>151</code><code>      })</code></p>
<p><code>152</code><code>    });</code></p>
<p><code>153</code><code>  }</code></p>
<p><code>154</code><code>  function getDownloadInfo(deviceType) {</code></p>
<p><code>155</code><code>    $.ajax({</code></p>
<p><code>156</code><code>      type: 'POST',</code></p>
<p><code>157</code><code>      url: '/products/download_info.php',</code></p>
<p><code>158</code><code>      dataType: 'json',</code></p>
<p><code>159</code><code>      data: {</code></p>
<p><code>160</code><code>        'deviceType': deviceType,</code></p>
<p><code>161</code><code>        'productType': 'evernote',</code></p>
<p><code>162</code><code>        'language': language</code></p>
<p><code>163</code><code>      },</code></p>
<p><code>164</code><code>      cache: false,</code></p>
<p><code>165</code><code>      success: function (result) {</code></p>
<p><code>166</code><code>        //console.log(result)</code></p>
<p><code>167</code><code>        download = true;</code></p>
<p><code>168</code><code>        $('#sign-up').attr('href', result.download_link).text(result.download_default).addClass('blue');</code></p>
<p><code>169</code><code>        //hide sign in link</code></p>
<p><code>170</code><code>        $('.sign-in-link').hide();</code></p>
<p><code>171</code><code>      }</code></p>
<p><code>172</code><code>    });</code></p>
<p><code>173</code><code>  }</code></p>
<p><code>174</code><code>  // -------------------------------------------------------</code></p>
<p><code>175</code><code>  //        Event controlers</code></p>
<p><code>176</code><code>  // -------------------------------------------------------</code></p>
<p><code>177</code><code>  // CTA sign up button on click</code></p>
<p><code>178</code><code>  $('#sign-up').on('click', function () {</code></p>
<p><code>179</code><code>    if (download === false) {</code></p>
<p><code>180</code><code>      if ($(this).hasClass('sign-in-link')) {</code></p>
<p><code>181</code><code>        $('#login').show();</code></p>
<p><code>182</code><code>        $('#create-account').hide();</code></p>
<p><code>183</code><code>      } else {</code></p>
<p><code>184</code><code>        $('#create-account').show();</code></p>
<p><code>185</code><code>        $('#login').hide();</code></p>
<p><code>186</code><code>      }</code></p>
<p><code>187</code><code>      signUpOverlay('signup');</code></p>
<p><code>188</code><code>          </code></p>
<p><code>189</code><code>      // click event</code></p>
<p><code>190</code><code>      var dataAction = $(this).attr('data-action');</code></p>
<p><code>191</code><code>      var dataLabel = $(this).attr('data-label');</code></p>
<p><code>192</code><code>      if (dataAction === undefined) {</code></p>
<p><code>193</code><code>        dataAction = 'click';</code></p>
<p><code>194</code><code>      }</code></p>
<p><code>195</code><code>      ga('send', 'event', 'Click Event', dataAction, dataLabel);</code></p>
<p><code>196</code><code>      return false;</code></p>
<p><code>197</code><code>    }</code></p>
<p><code>198</code><code>  });</code></p>
<p><code>199</code><code>  $('.change-form').on('click', function () {</code></p>
<p><code>200</code><code>    // $('.error-message').hide();</code></p>
<p><code>201</code><code>    // $('input').removeClass('error-border');</code></p>
<p><code>202</code><code>    $('input[type!="hidden"]').val('').removeClass('error-border');</code></p>
<p><code>203</code><code>    $('.error-message').hide();</code></p>
<p><code>204</code><code>    if ($('#create-account').is(':visible')) {</code></p>
<p><code>205</code><code>      $('#create-account').hide();</code></p>
<p><code>206</code><code>      $('#login').fadeIn();  // $('#username').focus();</code></p>
<p><code>207</code><code>    } else {</code></p>
<p><code>208</code><code>      $('#login').hide();</code></p>
<p><code>209</code><code>      $('#create-account').fadeIn();  //$('#email-address').focus();</code></p>
<p><code>210</code><code>    }</code></p>
<p><code>211</code><code>    return false;</code></p>
<p><code>212</code><code>  });</code></p>
<p><code>213</code><code>  // overlay close x on click</code></p>
<p><code>214</code><code>  $('.overlay .close').on('click', function () {</code></p>
<p><code>215</code><code>    signUpOverlay();</code></p>
<p><code>216</code><code>    return false;</code></p>
<p><code>217</code><code>  });</code></p>
<p><code>218</code><code>          </code></p>
<p><code>219</code><code>          </code></p>
<p><code>220</code><code>          </code></p>
<p><code>221</code><code>          </code></p>
<p><code>222</code><code>  // submit sign up</code></p>
<p><code>223</code><code>  window.submitForm = function(formId) {</code></p>
<p><code>224</code><code>    $('#'+formId).unbind('submit').submit();</code></p>
<p><code>225</code><code>  }</code></p>
<p><code>226</code><code>}(jQuery));</code></p>
<p><code>227</code><code>},{"./modules/get-parameter":3,"./modules/service-url":4,"./modules/sku":5}],2:[function(require,module,exports){</code></p>
<p><code>228</code><code>(function($) {</code></p>
<p><code>229</code><code>  'use strict';</code></p>
<p><code>230</code><code>          </code></p>
<p><code>231</code><code>  var url,</code></p>
<p><code>232</code><code>    loggedIn,</code></p>
<p><code>233</code><code>    chinaSite = false,</code></p>
<p><code>234</code><code>    userType;</code></p>
<p><code>235</code><code>          </code></p>
<p><code>236</code><code>  if ($('body').hasClass('china_site')) {</code></p>
<p><code>237</code><code>    chinaSite = true;</code></p>
<p><code>238</code><code>  }</code></p>
<p><code>239</code><code>          </code></p>
<p><code>240</code><code>  if(chinaSite === false){</code></p>
<p><code>241</code><code>    if (window.location.href.indexOf('stage') &gt; -1) {</code></p>
<p><code>242</code><code>      url = 'https://stage.evernote.com/CorpSiteUserVerification.action';</code></p>
<p><code>243</code><code>    } else {</code></p>
<p><code>244</code><code>      url = 'https://www.evernote.com/CorpSiteUserVerification.action';</code></p>
<p><code>245</code><code>    }</code></p>
<p><code>246</code><code>          </code></p>
<p><code>247</code><code>    $.ajax({</code></p>
<p><code>248</code><code>      type: 'POST',</code></p>
<p><code>249</code><code>      url: url,</code></p>
<p><code>250</code><code>      dataType: 'json',</code></p>
<p><code>251</code><code>      cache: false,</code></p>
<p><code>252</code><code>      xhrFields: {</code></p>
<p><code>253</code><code>        withCredentials: true</code></p>
<p><code>254</code><code>      },</code></p>
<p><code>255</code><code>      success: function(result) {</code></p>
<p><code>256</code><code>        loggedIn = result.loggedIn; // returns true or false</code></p>
<p><code>257</code><code>        userType = result.userType; // FREE, PREMIUM, or BUSINESS</code></p>
<p><code>258</code><code>        </code></p>
<p><code>259</code><code>        // call check session function</code></p>
<p><code>260</code><code>        checkSession(loggedIn, userType);</code></p>
<p><code>261</code><code>      }</code></p>
<p><code>262</code><code>    });</code></p>
<p><code>263</code><code>  }</code></p>
<p><code>264</code><code>          </code></p>
<p><code>265</code><code>}(jQuery));</code></p>
<p><code>266</code><code>},{}],3:[function(require,module,exports){</code></p>
<p><code>267</code><code>// getParameter</code></p>
<p><code>268</code><code>//</code></p>
<p><code>269</code><code>// Use: Returns query string values in JavaScript</code></p>
<p><code>270</code><code>//</code></p>
<p><code>271</code><code>// var productId = getParameter('id');</code></p>
<p><code>272</code><code>//</code></p>
<p><code>273</code><code>// Returns: value</code></p>
<p><code>274</code><code>// ------------------------------------------------------------</code></p>
<p><code>275</code><code>          </code></p>
<p><code>276</code><code>module.exports = function getParameter(name){</code></p>
<p><code>277</code><code>  'use strict';</code></p>
<p><code>278</code><code>  var queryDict = {};</code></p>
<p><code>279</code><code>  var queries = location.search.substr(1).split('&amp;');</code></p>
<p><code>280</code><code>  for (var i=0; i&lt;queries.length; i++) {</code></p>
<p><code>281</code><code>    queryDict[queries[i].split('=')[0]] = decodeURIComponent(queries[i].split('=')[1]);</code></p>
<p><code>282</code><code>  } </code></p>
<p><code>283</code><code>          </code></p>
<p><code>284</code><code>  // if name specified, return that specific get parameter</code></p>
<p><code>285</code><code>  if (name) {</code></p>
<p><code>286</code><code>    return queryDict.hasOwnProperty(name) ? decodeURIComponent(queryDict[name].replace(/\+/g, ' ')) : '';</code></p>
<p><code>287</code><code>  }</code></p>
<p><code>288</code><code>          </code></p>
<p><code>289</code><code>  return queryDict;</code></p>
<p><code>290</code><code>}</code></p>
<p><code>291</code><code>          </code></p>
<p><code>292</code><code>},{}],4:[function(require,module,exports){</code></p>
<p><code>293</code><code>// Module for creating service url</code></p>
<p><code>294</code><code>// Usage: </code></p>
<p><code>295</code><code>// var serviceUrl = require('./modules/service-url')('/destination/path');</code></p>
<p><code>296</code><code>          </code></p>
<p><code>297</code><code>module.exports = function serviceUrl(url) {</code></p>
<p><code>298</code><code>  // URL constructor doesn't work in IE8</code></p>
<p><code>299</code><code>  var parser = window.location.href;</code></p>
<p><code>300</code><code>  switch(parser.hostname) {</code></p>
<p><code>301</code><code>    case 'www-china.evernote.com':</code></p>
<p><code>302</code><code>      return 'https://stage-china.evernote.com'+url;</code></p>
<p><code>303</code><code>    break;</code></p>
<p><code>304</code><code>    case 'www.yinxiang.com':</code></p>
<p><code>305</code><code>      return 'https://app.yinxiang.com'+url;</code></p>
<p><code>306</code><code>    break;</code></p>
<p><code>307</code><code>    case 'yinxiang.com':</code></p>
<p><code>308</code><code>      return 'https://app.yinxiang.com'+url;</code></p>
<p><code>309</code><code>    break;</code></p>
<p><code>310</code><code>    case 'stage-corp.evernote.com':</code></p>
<p><code>311</code><code>      return 'https://stage.evernote.com'+url;</code></p>
<p><code>312</code><code>    break;</code></p>
<p><code>313</code><code>    default:</code></p>
<p><code>314</code><code>      return 'https://www.evernote.com'+url;</code></p>
<p><code>315</code><code>    break;</code></p>
<p><code>316</code><code>  }</code></p>
<p><code>317</code><code>};</code></p>
<p><code>318</code><code>},{}],5:[function(require,module,exports){</code></p>
<p><code>319</code><code>// Skus to pass</code></p>
<p><code>320</code><code>// premium-1mon [Evernote Premium monthly recurring]</code></p>
<p><code>321</code><code>// one-1mon [Evernote Premium monthly non-recurring]</code></p>
<p><code>322</code><code>// premium-1year [Evernote Premium annual recurring]</code></p>
<p><code>323</code><code>// one-1year [Evernote Premium annual non-recurring]</code></p>
<p><code>324</code><code>          </code></p>
<p><code>325</code><code>// biz-1mon [Evernote Business monthly recurring]</code></p>
<p><code>326</code><code>// biz-one-1mon [Evernote Business monthly non-recurring]</code></p>
<p><code>327</code><code>// biz-1year [Evernote Business annual recurring]</code></p>
<p><code>328</code><code>// biz-one-1year [Evernote Business annual non-recurring]</code></p>
<p><code>329</code><code>          </code></p>
<p><code>330</code><code>// one-1GB-quota [1GB additional upload allowance, will be deprecated]</code></p>
<p><code>331</code><code>          </code></p>
<p><code>332</code><code>// plus-1mon [Evernote Active monthly recurring]</code></p>
<p><code>333</code><code>// plus-one-1mon [Evernote Active monthly non-recurring]</code></p>
<p><code>334</code><code>// plus-1year [Evernote Active annual recurring]</code></p>
<p><code>335</code><code>// plus-one-1year [Evernote Active annual non-recurring]</code></p>
<p><code>336</code><code>          </code></p>
<p><code>337</code><code>module.exports = function(skus, callback){</code></p>
<p><code>338</code><code>  var sku = skus;</code></p>
<p><code>339</code><code>  var par;</code></p>
<p><code>340</code><code>  var url;</code></p>
<p><code>341</code><code>  var location = window.location.href;</code></p>
<p><code>342</code><code>  var prices = {};</code></p>
<p><code>343</code><code>  // get the skus</code></p>
<p><code>344</code><code>  for (var i = 0; i &lt; sku.length; i++){</code></p>
<p><code>345</code><code>    if(i === 0){</code></p>
<p><code>346</code><code>      par = '?sku=' + sku[i];</code></p>
<p><code>347</code><code>    }else{</code></p>
<p><code>348</code><code>      par += '&amp;sku=' + sku[i];</code></p>
<p><code>349</code><code>    }</code></p>
<p><code>350</code><code>  }</code></p>
<p><code>351</code><code>          </code></p>
<p><code>352</code><code>  // set the commerce url</code></p>
<p><code>353</code><code>  //url = 'https://stage-dev.corp.etonreve.com/commerce/catalog';</code></p>
<p><code>354</code><code>  if (location.substr(i).search(/stage|local|corp|china/) &gt; -1 || window.location.port) {</code></p>
<p><code>355</code><code>    url = 'https://stage.evernote.com/commerce/catalog';</code></p>
<p><code>356</code><code>    if($('body').hasClass('china_site')){</code></p>
<p><code>357</code><code>      url = 'https://stage-china.evernote.com/commerce/catalog';</code></p>
<p><code>358</code><code>    }</code></p>
<p><code>359</code><code>  } else {</code></p>
<p><code>360</code><code>    url = 'https://www.evernote.com/commerce/catalog';</code></p>
<p><code>361</code><code>    if ($('body').hasClass('china_site')) {</code></p>
<p><code>362</code><code>      url = 'https://app.yinxiang.com/commerce/catalog';</code></p>
<p><code>363</code><code>    };</code></p>
<p><code>364</code><code>  }</code></p>
<p><code>365</code><code>  url = url + par;</code></p>
<p><code>366</code><code>          </code></p>
<p><code>367</code><code>  $.ajax({</code></p>
<p><code>368</code><code>    type: 'POST',</code></p>
<p><code>369</code><code>    url: url,</code></p>
<p><code>370</code><code>    dataType: 'jsonp',</code></p>
<p><code>371</code><code>    jsonpCallback: 'callbackName',</code></p>
<p><code>372</code><code>    success: function(data) {</code></p>
<p><code>373</code><code>      var prices = {};</code></p>
<p><code>374</code><code>      if (callback) {</code></p>
<p><code>375</code><code>        callback(data);</code></p>
<p><code>376</code><code>      } else {</code></p>
<p><code>377</code><code>        for (var tier in data) {</code></p>
<p><code>378</code><code>          //prices[tier] = data[tier].formatted;</code></p>
<p><code>379</code><code>          if ($('[data-sku="' + tier +'"]').length &gt; 0) {</code></p>
<p><code>380</code><code>            $('[data-sku="' + tier + '"]').html(data[tier].formatted);</code></p>
<p><code>381</code><code>          }</code></p>
<p><code>382</code><code>        }</code></p>
<p><code>383</code><code>      }</code></p>
<p><code>384</code><code>    }</code></p>
<p><code>385</code><code>  });</code></p>
<p><code>386</code><code>};</code></p>
<p><code>387</code><code>},{}],6:[function(require,module,exports){</code></p>
<p><code>388</code><code>/**</code></p>
<p><code>389</code><code> * Validate module</code></p>
<p><code>390</code><code> * Applied to input fields data-validate='required, email'</code></p>
<p><code>391</code><code> *</code></p>
<p><code>392</code><code> * Note: email_in_use handles email validation as well</code></p>
<p><code>393</code><code> */</code></p>
<p><code>394</code><code>          </code></p>
<p><code>395</code><code>(function($) {</code></p>
<p><code>396</code><code>  'use strict';</code></p>
<p><code>397</code><code>          </code></p>
<p><code>398</code><code>  var language = $('body').attr('data-lang'),</code></p>
<p><code>399</code><code>    serviceUrl = require('./service-url'),</code></p>
<p><code>400</code><code>    errorMessages,</code></p>
<p><code>401</code><code>    errorUrl,</code></p>
<p><code>402</code><code>    errorType,</code></p>
<p><code>403</code><code>    chinaSite,</code></p>
<p><code>404</code><code>    valid = [],</code></p>
<p><code>405</code><code>    validationRules;</code></p>
<p><code>406</code><code>          </code></p>
<p><code>407</code><code>  // if china</code></p>
<p><code>408</code><code>  if ($('body').hasClass('china_site')) {</code></p>
<p><code>409</code><code>    chinaSite = true;</code></p>
<p><code>410</code><code>  }</code></p>
<p><code>411</code><code>          </code></p>
<p><code>412</code><code>  if(language !== 'en' &amp;&amp; language !== 'ja' &amp;&amp; chinaSite !== true){</code></p>
<p><code>413</code><code>    errorUrl = '/intl/'+ language +'/content/error-messages.json';</code></p>
<p><code>414</code><code>  }else if(language === 'ja'){</code></p>
<p><code>415</code><code>    errorUrl = '/intl/jp/content/error-messages.json';</code></p>
<p><code>416</code><code>  }else{</code></p>
<p><code>417</code><code>    errorUrl = '/content/error-messages.json';</code></p>
<p><code>418</code><code>  }</code></p>
<p><code>419</code><code>          </code></p>
<p><code>420</code><code>  // prevent browser default html5 validation</code></p>
<p><code>421</code><code>  $('form').attr('novalidate', 'novalidate');</code></p>
<p><code>422</code><code>          </code></p>
<p><code>423</code><code>  // get translated error messages</code></p>
<p><code>424</code><code>  $.ajax({</code></p>
<p><code>425</code><code>    type: 'GET',</code></p>
<p><code>426</code><code>    url: errorUrl,</code></p>
<p><code>427</code><code>    dataType: 'json',</code></p>
<p><code>428</code><code>    cache: true,</code></p>
<p><code>429</code><code>    async: false,</code></p>
<p><code>430</code><code>    success: function(result) {</code></p>
<p><code>431</code><code>      errorMessages = result;</code></p>
<p><code>432</code><code>      // find all form elements on page</code></p>
<p><code>433</code><code>      $('input, select, textarea').each(function() {</code></p>
<p><code>434</code><code>        var attr = $(this).attr('data-validate');</code></p>
<p><code>435</code><code>        var fieldId = $(this).attr('id');</code></p>
<p><code>436</code><code>          </code></p>
<p><code>437</code><code>        if (typeof attr !== 'undefined' &amp;&amp; attr !== false) {</code></p>
<p><code>438</code><code>          </code></p>
<p><code>439</code><code>          validationRules = $(this).data('validate').split(',');</code></p>
<p><code>440</code><code>          </code></p>
<p><code>441</code><code>          // wrap inputs and label in div field item</code></p>
<p><code>442</code><code>          //$(this).prev('label').andSelf().wrapAll('&lt;div class="field-item"/&gt;');</code></p>
<p><code>443</code><code>          </code></p>
<p><code>444</code><code>          // check data attribute for validation rules</code></p>
<p><code>445</code><code>          validationRulesLoop(validationRules, fieldId);</code></p>
<p><code>446</code><code>        }</code></p>
<p><code>447</code><code>      });</code></p>
<p><code>448</code><code>    }</code></p>
<p><code>449</code><code>  });</code></p>
<p><code>450</code><code>          </code></p>
<p><code>451</code><code>  // Regex validation rules</code></p>
<p><code>452</code><code>  var validate = {</code></p>
<p><code>453</code><code>    required: /./,</code></p>
<p><code>454</code><code>    name: /^[A-Za-z ,'-]{1,255}$/,</code></p>
<p><code>455</code><code>    email: /^[A-Za-z0-9!#$%&amp;'*+\/=?^_`{|}~-]+(\.[A-Za-z0-9!#$%&amp;'*+\/=?^_`{|}~-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*\.([A-Za-z]{2,})$/,</code></p>
<p><code>456</code><code>    email_in_use: /^[A-Za-z0-9!#$%&amp;'*+\/=?^_`{|}~-]+(\.[A-Za-z0-9!#$%&amp;'*+\/=?^_`{|}~-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*\.([A-Za-z]{2,})$/,</code></p>
<p><code>457</code><code>    zipcode: /^\d{5}(?:[-\s]\d{4})?$/,</code></p>
<p><code>458</code><code>    postalcode: /^[A-Za-z]\d[A-Za-z][ -]?\d[A-Za-z]\d$/,</code></p>
<p><code>459</code><code>    telephone: /^(\+\d{1,2}\s)?\(?\d{3}\)?[\s.-]\d{3}[\s.-]\d{4}$/,</code></p>
<p><code>460</code><code>    password: /^[A-Za-z0-9!#$%&amp;'()*+,.\/:;&lt;=&gt;?@^_`{|}~\[\]\\-]{6,64}$/,</code></p>
<p><code>461</code><code>    url: /((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&amp;=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&amp;=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&amp;;%@.\w_]*)#?(?:[\w]*))?)/,</code></p>
<p><code>462</code><code>    date: /^([1-9]|0[1-9]|[12][0-9]|3[01])\D([1-9]|0[1-9]|1[012])\D(19[0-9][0-9]|20[0-9][0-9])$/, // dd mm yyyy, d/m/yyyy, etc.</code></p>
<p><code>463</code><code>    year: /^(19|20)[\d]{2,2}$/,</code></p>
<p><code>464</code><code>    number: /^[0-9]{1,45}$/,</code></p>
<p><code>465</code><code>    alphabet: /^[A-z]+$/,</code></p>
<p><code>466</code><code>    alphanumeric: /^[a-zA-Z0-9]*$/,</code></p>
<p><code>467</code><code>    ipaddress: /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,</code></p>
<p><code>468</code><code>    hexvalue: /^#?([a-f0-9]{6}|[a-f0-9]{3})$/</code></p>
<p><code>469</code><code>  };</code></p>
<p><code>470</code><code>          </code></p>
<p><code>471</code><code>  // Error messages after validation rules</code></p>
<p><code>472</code><code>  function errorMessage(type) {</code></p>
<p><code>473</code><code>    var localError = type + '_localizable';</code></p>
<p><code>474</code><code>    errorType = errorMessages[localError];</code></p>
<p><code>475</code><code>    return errorType;</code></p>
<p><code>476</code><code>  }</code></p>
<p><code>477</code><code>          </code></p>
<p><code>478</code><code>  // Check if email exists already and return promise</code></p>
<p><code>479</code><code>  // fail function will handle the validation</code></p>
<p><code>480</code><code>  function emailAvailable(email) {</code></p>
<p><code>481</code><code>    return $.ajax({</code></p>
<p><code>482</code><code>      type: 'GET',</code></p>
<p><code>483</code><code>      url: serviceUrl('/RegistrationCheck.action?email=' + email + '&amp;checkEmail=true'),</code></p>
<p><code>484</code><code>    });</code></p>
<p><code>485</code><code>  }</code></p>
<p><code>486</code><code>          </code></p>
<p><code>487</code><code>  function validationRulesLoop(validationRules, fieldId) {</code></p>
<p><code>488</code><code>          </code></p>
<p><code>489</code><code>    for (var i = 0; i &lt; validationRules.length; i++) {</code></p>
<p><code>490</code><code>      // add error messages to markup</code></p>
<p><code>491</code><code>      var type = validationRules[i];</code></p>
<p><code>492</code><code>      type = type.replace(' ', '');</code></p>
<p><code>493</code><code>          </code></p>
<p><code>494</code><code>      var ariaError = fieldId + '-' + type + '-error';</code></p>
<p><code>495</code><code>          </code></p>
<p><code>496</code><code>      //add ARIA role required if input is required</code></p>
<p><code>497</code><code>      if (type === 'required') {</code></p>
<p><code>498</code><code>        $('#' + fieldId).attr('aria-required', 'true');</code></p>
<p><code>499</code><code>      }</code></p>
<p><code>500</code><code>          </code></p>
<p><code>501</code><code>      //add aria described by</code></p>
<p><code>502</code><code>      $('#' + fieldId).attr('aria-describedby', ariaError);</code></p>
<p><code>503</code><code>          </code></p>
<p><code>504</code><code>      // add error message to field</code></p>
<p><code>505</code><code>      $('#' + fieldId).parent('.field-item').append('&lt;span class="error-message ' + type + '" id="' + ariaError + '" role="alert"&gt;' + errorMessage(type) + '&lt;/span&gt;');</code></p>
<p><code>506</code><code>    }</code></p>
<p><code>507</code><code>          </code></p>
<p><code>508</code><code>  }</code></p>
<p><code>509</code><code>          </code></p>
<p><code>510</code><code>  // Validate form fields function</code></p>
<p><code>511</code><code>  function validation(value, id) {</code></p>
<p><code>512</code><code>    var errorActive = false;</code></p>
<p><code>513</code><code>          </code></p>
<p><code>514</code><code>    // hide any errors already showing</code></p>
<p><code>515</code><code>    $('#' + id).parent('.field-item').find('.error-message').hide();</code></p>
<p><code>516</code><code>    // remove existing border error class</code></p>
<p><code>517</code><code>    $('#' + id).parent('.field-item').removeClass('active-error');</code></p>
<p><code>518</code><code>    $('#' + id).removeClass('error-border');</code></p>
<p><code>519</code><code>          </code></p>
<p><code>520</code><code>    //trim blank space from value</code></p>
<p><code>521</code><code>    value = $.trim(value);</code></p>
<p><code>522</code><code>          </code></p>
<p><code>523</code><code>    // get validation rules from data attribute</code></p>
<p><code>524</code><code>    var attr = $('#' + id).attr('data-validate');</code></p>
<p><code>525</code><code>    if (typeof attr !== 'undefined' &amp;&amp; attr !== false) {</code></p>
<p><code>526</code><code>      // use attr instead of .data('validate') to avoid data cache</code></p>
<p><code>527</code><code>      validationRules = attr.split(',');</code></p>
<p><code>528</code><code>          </code></p>
<p><code>529</code><code>      // check data attribute for validation rules</code></p>
<p><code>530</code><code>      for (var i = 0; i &lt; validationRules.length; i++) {</code></p>
<p><code>531</code><code>        var type = validationRules[i];</code></p>
<p><code>532</code><code>        type = type.replace(' ', '');</code></p>
<p><code>533</code><code>        if ((value === '' || value === null) &amp;&amp; type === 'required' &amp;&amp; $('#' + id).is(':visible')) {</code></p>
<p><code>534</code><code>          // show required erorr</code></p>
<p><code>535</code><code>          $('#' + id).parent('.field-item').addClass('active-error');</code></p>
<p><code>536</code><code>          $('#' + id).parent('.field-item').find('.error-message.required').fadeIn().css('display', 'block');</code></p>
<p><code>537</code><code>          $('#' + id).addClass('error-border');</code></p>
<p><code>538</code><code>          errorActive = true;</code></p>
<p><code>539</code><code>          valid.push('false');</code></p>
<p><code>540</code><code>        } else if (type === 'email_in_use') {</code></p>
<p><code>541</code><code>          // only make AJAX request if email is valid</code></p>
<p><code>542</code><code>          if (validate['email'].test($('#' + id).val()) &amp;&amp; $('#id' + id).val() !== '') {</code></p>
<p><code>543</code><code>            emailAvailable(value)</code></p>
<p><code>544</code><code>              .fail(function(e, ts, et) {</code></p>
<p><code>545</code><code>                if (et === 'Conflict') {</code></p>
<p><code>546</code><code>                  $('#' + id).parent('.field-item').addClass('active-error');</code></p>
<p><code>547</code><code>                  $('#' + id).parent('.field-item').find('.error-message.email').fadeOut();</code></p>
<p><code>548</code><code>                  $('#' + id).parent('.field-item').find('.error-message.email_in_use').fadeIn().css('display', 'block');</code></p>
<p><code>549</code><code>                  $('#' + id).addClass('error-border');</code></p>
<p><code>550</code><code>                  errorActive = true;</code></p>
<p><code>551</code><code>                  valid.push('false');</code></p>
<p><code>552</code><code>                } </code></p>
<p><code>553</code><code>              });</code></p>
<p><code>554</code><code>          }</code></p>
<p><code>555</code><code>        } else if (!validate[type].test($('#' + id).val()) &amp;&amp; value !== '') {</code></p>
<p><code>556</code><code>          // fade in error message</code></p>
<p><code>557</code><code>          $('#' + id).parent('.field-item').addClass('active-error');</code></p>
<p><code>558</code><code>          $('#' + id).parent('.field-item').find('.error-message.' + type).fadeIn().css('display', 'block');</code></p>
<p><code>559</code><code>          // add border class to the input field</code></p>
<p><code>560</code><code>          $('#' + id).addClass('error-border');</code></p>
<p><code>561</code><code>          valid.push('false');</code></p>
<p><code>562</code><code>        } else {</code></p>
<p><code>563</code><code>          if (!errorActive) {</code></p>
<p><code>564</code><code>            $('#' + id).parent('.field-item').parent().removeClass('error-exists');</code></p>
<p><code>565</code><code>            $('#' + id).parent('.field-item').removeClass('active-error');</code></p>
<p><code>566</code><code>            $('#' + id).removeClass('error-border');</code></p>
<p><code>567</code><code>          } else {</code></p>
<p><code>568</code><code>           $('#' + id).parent('.field-item').parent().addClass('error-exists');</code></p>
<p><code>569</code><code>          }</code></p>
<p><code>570</code><code>          valid.push('true');</code></p>
<p><code>571</code><code>        }</code></p>
<p><code>572</code><code>      }</code></p>
<p><code>573</code><code>    }</code></p>
<p><code>574</code><code>  }</code></p>
<p><code>575</code><code>          </code></p>
<p><code>576</code><code>  // on blur validate fields</code></p>
<p><code>577</code><code>  $('input, select, textarea').on('blur change', function() {</code></p>
<p><code>578</code><code>    // field value</code></p>
<p><code>579</code><code>    var value = $(this).val();</code></p>
<p><code>580</code><code>    var fieldId = $(this).attr('id');</code></p>
<p><code>581</code><code>          </code></p>
<p><code>582</code><code>    // pass value and field id to validation function</code></p>
<p><code>583</code><code>    validation(value, fieldId);</code></p>
<p><code>584</code><code>          </code></p>
<p><code>585</code><code>  });</code></p>
<p><code>586</code><code>          </code></p>
<p><code>587</code><code>  $('form').submit(function(event) {</code></p>
<p><code>588</code><code>    var formId = event.target.id;</code></p>
<p><code>589</code><code>    var elementSelector;</code></p>
<p><code>590</code><code>    var emailCheck = false;</code></p>
<p><code>591</code><code>    var wait = 0;</code></p>
<p><code>592</code><code>    if (formId === '') {</code></p>
<p><code>593</code><code>      elementSelector = '[data-validate]';</code></p>
<p><code>594</code><code>    } else {</code></p>
<p><code>595</code><code>      elementSelector = '#' + formId + ' [data-validate]';</code></p>
<p><code>596</code><code>    }</code></p>
<p><code>597</code><code>          </code></p>
<p><code>598</code><code>    // clear valid array</code></p>
<p><code>599</code><code>    valid = []; </code></p>
<p><code>600</code><code>          </code></p>
<p><code>601</code><code>    event.preventDefault();</code></p>
<p><code>602</code><code>    $(elementSelector).each(function() {</code></p>
<p><code>603</code><code>      var attr = $(this).attr('data-validate');</code></p>
<p><code>604</code><code>      var fieldId = $(this).attr('id');</code></p>
<p><code>605</code><code>      var value = $(this).val();</code></p>
<p><code>606</code><code>          </code></p>
<p><code>607</code><code>      if (typeof attr !== 'undefined' || attr !== false) {</code></p>
<p><code>608</code><code>        // if we are doing an email check, wait half a second to give it time</code></p>
<p><code>609</code><code>        if (attr.indexOf('email_in_use') &gt; -1) {</code></p>
<p><code>610</code><code>          wait = 500;</code></p>
<p><code>611</code><code>        }</code></p>
<p><code>612</code><code>          </code></p>
<p><code>613</code><code>        // pass field values and field ids to validation function</code></p>
<p><code>614</code><code>        validation(value, fieldId);</code></p>
<p><code>615</code><code>      }</code></p>
<p><code>616</code><code>    });</code></p>
<p><code>617</code><code>          </code></p>
<p><code>618</code><code>    setTimeout(function(e) {</code></p>
<p><code>619</code><code>      if ($.inArray('false', valid) !== -1) {</code></p>
<p><code>620</code><code>        // prevent default form submit</code></p>
<p><code>621</code><code>        event.preventDefault();</code></p>
<p><code>622</code><code>        //return false;</code></p>
<p><code>623</code><code>      } else {</code></p>
<p><code>624</code><code>        if (formId !== '') {</code></p>
<p><code>625</code><code>          submitForm(formId);</code></p>
<p><code>626</code><code>        } else {</code></p>
<p><code>627</code><code>          submitForm();</code></p>
<p><code>628</code><code>        }</code></p>
<p><code>629</code><code>      }</code></p>
<p><code>630</code><code>    }, wait);</code></p>
<p><code>631</code><code>  });</code></p>
<p><code>632</code><code>          </code></p>
<p><code>633</code><code>}(jQuery));</code></p>
<p><code>634</code><code>          </code></p>
<p><code>635</code><code>},{"./service-url":4}]},{},[6,1,2]);</code></p>
</div><iframe src="about:blank" style="width:0px;height:0px;border:0px solid white;" id="iframeSpelling" title="Ignore - used for spell checking">
					Ignore - used for spell checking
				</iframe></body></html>
